# Development Plan (v1.0 → v2.0 → v3.0)

本计划遵循版本演进思路：
- v1.0 最小可用：上传简历 + 输入 JD → 生成短答 或 生成封面信（PDF）
- v2.0 体验增强：标签/检索、模板系统化、审计可视化、稳定性提升
- v3.0 扩展能力：多用户命名空间、模型适配矩阵、A/B 实验、模板与导出生态

每个 TASK 包含：版本号、状态（计划中/开发中/测试中/完成）、最小粒度子任务、AI 助手可执行提示词、验收标准（清单）、注意事项。

---

## v1.0（最小可用）

### TASK001 仓库初始化与骨架
- 版本号：v1.0
- 状态：计划中
- 子任务：
  1) 建立 monorepo 目录：`frontend/`、`backend/`、`storage/`、`templates/`、`docs/`、`scripts/`
  2) 添加规范化文件：`LICENSE`(MIT)、`.editorconfig`、`.gitignore`、`.nvmrc`(v20)、`.python-version`(3.11)、`.env.example`
  3) 编写 `README.md`（蓝图）与 `DEV_PLAN.md`（本文件）
- AI 助手提示词：
  - 请在空仓库中创建上述目录与占位 README/.gitkeep，添加顶层规范化文件与环境样例，并撰写 README 蓝图与 DEV_PLAN 结构稿，不引入任何可运行代码。
- 验收标准：
  - 目录与文件存在且内容完整；README/DEV_PLAN 覆盖蓝图与任务清单
- 注意事项：
  - 不加入依赖与可执行脚本；不提交真实密钥

### TASK002 后端骨架（占位）
- 版本号：v1.0
- 状态：计划中
- 子任务：
  1) 目录与文件占位：`backend/app/`、`backend/tests/`、`backend/README.md` 更新模块说明
  2) 仅文档声明 FastAPI 入口、CORS、健康检查；不实现代码
- AI 助手提示词：
  - 在 backend/ 更新 README 说明后续将添加 FastAPI 入口与基础端点的规划，不添加任何 .py 文件。
- 验收标准：
  - 文档说明清晰、无代码实现
- 注意事项：
  - 坚持“1.0 初始提交不含可运行代码”的边界

### TASK003 文档摄取与解析（设计占位）
- 版本号：v1.0
- 状态：计划中
- 子任务：
  1) 设计说明：支持 PDF/DOCX/TXT/MD + OCR(JPG/PNG)，语言自动检测
  2) 解析快照结构定义（字段清单，JSON Schema 草案）
- AI 助手提示词：
  - 在 docs/ 新增解析与 OCR 的设计说明文件（不含代码），列出字段与流程。
- 验收标准：
  - 设计文档存在且字段定义完整
- 注意事项：
  - 暂不接入任何真实依赖

### TASK004 生成接口（设计占位）
- 版本号：v1.0
- 状态：计划中
- 子任务：
  1) 短答接口与参数约束（≤200 字，默认随 JD 语言）
  2) 封面信生成参数（风格/段落/字数/关键词/语言）与返回结构（Markdown/HTML）
- AI 助手提示词：
  - 在 docs/ 新增 API 设计说明文件，描述 /generate/short 与 /generate/letter 的请求/响应。
- 验收标准：
  - API 设计文档完整且可据此实现
- 注意事项：
  - 记录审计字段（模型、温度、惩罚、提示词、种子、时间戳、输入哈希）

### TASK005 PDF 导出（设计占位）
- 版本号：v1.0
- 状态：计划中
- 子任务：
  1) HTML→PDF 渲染方案（Playwright/Chromium）与 A4 版式规则
  2) Formal/Warm/Tech 三套模板的区块定义与变量命名
- AI 助手提示词：
  - 在 templates/ 与 docs/ 中分别添加模板占位与样式规范文档（不含实现）。
- 验收标准：
  - 模板区块与排版规范清晰
- 注意事项：
  - 字体回退列表与中英兼容策略

### TASK006 审计与复现（设计占位）
- 版本号：v1.0
- 状态：计划中
- 子任务：
  1) 审计记录表结构（SQLite 字段）与 JSON 导出格式
  2) 复现所需参数最小集合定义
- AI 助手提示词：
  - 在 docs/ 新增审计结构说明，列出字段和复现指令格式。
- 验收标准：
  - 字段定义齐全，可驱动后续实现
- 注意事项：
  - 不记录超出必要的个人敏感信息

---

## v2.0（体验增强）

### TASK101 标签与检索增强
- 版本号：v2.0
- 状态：计划中
- 子任务：
  1) 前端筛选器与多标签组合
  2) 后端标签索引与分页
- AI 助手提示词：
  - 在 frontend/ 与 backend/ 的 README 中补充实现计划与 API 变更草案。
- 验收标准：
  - 1 万条记录内检索流畅
- 注意事项：
  - 合理的索引与查询策略

### TASK102 模板与样式系统化
- 版本号：v2.0
- 状态：计划中
- 子任务：
  1) 样式变量化与模板热替换
  2) 封面信元素粒度化配置
- AI 助手提示词：
  - 在 templates/ 与 docs/ 说明模板参数化与主题切换机制。
- 验收标准：
  - 无需改代码即可切换模板与风格
- 注意事项：
  - 模板版本化与兼容

### TASK103 审计可视化
- 版本号：v2.0
- 状态：计划中
- 子任务：
  1) 参数/提示词/模型版本可视化
  2) 一键复现按钮与副本生成
- AI 助手提示词：
  - 在 frontend/ README 增加 UI 交互草图与数据接口对接说明。
- 验收标准：
  - 可从历史记录中复现任意生成
- 注意事项：
  - 明确只读与再生成的权限边界

### TASK104 稳定性与弹性
- 版本号：v2.0
- 状态：计划中
- 子任务：
  1) 超时、重试、退避策略
  2) 可观测性日志与错误分级
- AI 助手提示词：
  - 在 backend/ README 增补中间件与日志结构设计。
- 验收标准：
  - 异常场景提示清晰，可恢复
- 注意事项：
  - 限流与背压的边界

---

## v3.0（扩展能力）

### TASK201 多用户命名空间
- 版本号：v3.0
- 状态：计划中
- 子任务：
  1) 轻量用户命名空间设计与目录/DB 隔离
  2) 用户切换与权限模型（本地）
- AI 助手提示词：
  - 在 docs/ 增加命名空间与多用户数据隔离设计。
- 验收标准：
  - 不同用户数据互不可见
- 注意事项：
  - 兼容单机单用户模式

### TASK202 模型适配矩阵
- 版本号：v3.0
- 状态：计划中
- 子任务：
  1) Provider 接口抽象与配置
  2) Qwen 等厂商适配位实现计划
- AI 助手提示词：
  - 在 docs/ 设计 Provider 抽象与配置示例。
- 验收标准：
  - 切换 Provider 无需改业务层
- 注意事项：
  - 环境变量与密钥管理

### TASK203 A/B 实验与对比
- 版本号：v3.0
- 状态：计划中
- 子任务：
  1) 参数组合对比
  2) 评分与导出
- AI 助手提示词：
  - 在 docs/ 增加 A/B 方案与评分口径。
- 验收标准：
  - 可视化对比两份输出差异
- 注意事项：
  - 指标口径一致性

---

## 版本与分支策略（文档化）
- 主分支：main
- 分支命名：feat/*、fix/*、chore/*、docs/*、refactor/*、release/*
- 前端包管理：pnpm；后端依赖：Poetry

## 环境与运行（文档化）
- Node：.nvmrc = v20
- Python：.python-version = 3.11
- 环境变量：见 `.env.example`
